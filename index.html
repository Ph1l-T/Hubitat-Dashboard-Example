<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eletrize</title>
    <!-- Raleway font: 200,300,400,500 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- SPA root -->
    <div id="spa-root"></div>

    <!-- Navbar fixa SPA -->
    <nav class="navbar" id="spa-navbar">
        <div class="nav-item" data-page="music">
            <div class="nav-icon-wrapper">
                <img src="images/icons/icon-music.svg" alt="Música" class="nav-icon">
            </div>
        </div>
        <div class="nav-item" data-page="confort">
            <div class="nav-icon-wrapper">
                <img src="images/icons/icon-confort.svg" alt="Conforto" class="nav-icon">
            </div>
        </div>
        <div class="nav-item" data-page="home">
            <div class="nav-icon-wrapper">
                <img src="images/icons/icon-home.svg" alt="Home" class="nav-icon">
            </div>
        </div>
        <div class="nav-item" data-page="watch">
            <div class="nav-icon-wrapper">
                <img src="images/icons/icon-watch.svg" alt="Assistir" class="nav-icon">
            </div>
        </div>
        <div class="nav-item" data-page="scenes">
            <div class="nav-icon-wrapper">
                <img src="images/icons/icon-scenes.svg" alt="Cenários" class="nav-icon">
            </div>
        </div>
    </nav>

    <script src="script.js"></script>
    <script>
    // --- SPA Core ---
    const spaRoot = document.getElementById('spa-root');
    const pages = {
        music: () => `
            <main class="container"><div class="page active"><h1 class="page-title">Música</h1><div style="color:#bbb;text-align:center;margin-top:40px;">Página de Música em construção.</div></div></main>
        `,
        confort: () => `
            <main class="container"><div class="page active"><h1 class="page-title">Conforto</h1><div style="color:#bbb;text-align:center;margin-top:40px;">Página de conforto em construção.</div></div></main>
        `,
        watch: () => `
            <main class="container"><div class="page active"><h1 class="page-title">Assistir</h1><div style="color:#bbb;text-align:center;margin-top:40px;">Página de assistir em construção.</div></div></main>
        `,
        scenes: () => `
            <main class="container"><div class="page active"><h1 class="page-title">Cenários</h1><div style="color:#bbb;text-align:center;margin-top:40px;">Página de Cenários em construção.</div></div></main>
        `,
        home: () => `
            <div class="top-bar-custom"></div>
            <main class="container">
                <div class="page active" id="home-page">
                    <h1 class="page-title">Home</h1>
                    <div class="rooms-frame">
                        <div class="rooms-list">
                            <div class="room-card">
                                <img src="https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/Escritorio-photo.png" alt="Escritório">
                                <span>Escritório</span>
                                <div class="room-icons-row" style="z-index:11; position:relative;">
                                    <div style="width: 100%; height: 100%; justify-content: flex-start; align-items: flex-start; gap: 35px; display: inline-flex">
                                        <div class="icon-toggle-light" data-state="off" data-device-ids="101,102" onclick="toggleLightIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-light-off.svg" alt="Luz" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                        <div class="icon-toggle-tv" data-state="off" onclick="toggleTvIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-tv-off.svg" alt="TV" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                        <div class="icon-toggle-shader" data-state="off" onclick="toggleShaderIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-shader-off.svg" alt="Cortina" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                    </div>
                                </div>
                                <button class="room-card-link" onclick="spaNavigate('escritorio')" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:10;background:transparent;border:none;cursor:pointer;"></button>
                            </div>

                            <div class="room-card">
                                <img src="https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/cinema-photo.png" alt="Cinema">
                                <span>Cinema</span>
                                <div class="room-icons-row">
                                    <div style="width: 100%; height: 100%; justify-content: flex-start; align-items: flex-start; gap: 35px; display: inline-flex">
                                        <div class="icon-toggle-light" data-state="off" onclick="toggleLightIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-light-off.svg" alt="Luz" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                        <div class="icon-toggle-tv" data-state="off" onclick="toggleTvIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-tv-off.svg" alt="TV" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                    </div>
                                </div>
                                <button class="room-card-link" onclick="spaNavigate('cinema')" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:10;background:transparent;border:none;cursor:pointer;"></button>
                            </div>

                            <div class="room-card">
                                <img src="https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/recepcao-photo.png" alt="Recepção">
                                <span>Recepção</span>
                                <div class="room-icons-row">
                                    <div style="width: 100%; height: 100%; justify-content: flex-start; align-items: flex-start; gap: 35px; display: inline-flex">
                                        <div class="icon-toggle-light" data-state="off" onclick="toggleLightIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-light-off.svg" alt="Luz" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                        <div class="icon-toggle-tv" data-state="off" onclick="toggleTvIcon(this)" style="width: 42px; height: 42px; position: relative; cursor: pointer;">
                                            <img src="images/icons/icon-small-tv-off.svg" alt="TV" style="width: 100%; height: 100%; object-fit: contain; position: absolute; left: 0; top: 0;" />
                                        </div>
                                    </div>
                                </div>
                                <button class="room-card-link" onclick="spaNavigate('recepcao')" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:10;background:transparent;border:none;cursor:pointer;"></button>
                            </div>

                        </div>
                    </div>
                </div>
            </main>
        `,

        escritorio: () => `
<div class="page active page-container" style="background-image: url('https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/Escritorio-photo.png');">
    <div class="page-header">
        <button class="back-btn" onclick="spaNavigate('home')"><img src="images/icons/back.svg" alt="Voltar"></button>
        <h1 class="page-title">Escritório</h1>
    </div>
    <div class="controls-grid">
        <div class="control-card small" data-state="off" data-device-id="102" onclick="toggleDevice(this, 'light')">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Pendente</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card small" data-state="off" data-device-id="101" onclick="toggleDevice(this, 'light')">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Trilho</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card large thermostat" id="thermostat">
            <div class="thermostat-display">
                <span id="current-temp">22</span>&deg;C
            </div>
            <div class="thermostat-buttons">
                <div class="temp-decrease" id="temp-decrease"></div>
                <div class="temp-increase" id="temp-increase"></div>
            </div>
        </div>
        <div class="control-card large" data-state="off" onclick="toggleDevice(this, 'tv')">
            <img src="images/icons/icon-small-tv-off.svg" class="control-icon">
            <div class="control-label">Televisão</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card large" data-state="closed" onclick="toggleDevice(this, 'shader')">
            <img src="images/icons/icon-small-shader-off.svg" class="control-icon">
            <div class="control-label">Cortinas</div>
            <div class="control-state">Fechadas</div>
        </div>
        <div class="control-card small dvr">
            <img src="images/icons/icon-watch.svg" class="control-icon">
            <div class="control-label">DVR I</div>
        </div>
        <div class="control-card small dvr">
            <img src="images/icons/icon-watch.svg" class="control-icon">
            <div class="control-label">DVR II</div>
        </div>
    </div>
</div>
        `,

        projetos: () => `
<div class="page active page-container" style="background-image: url('https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/projetos-photo.png');">
    <div class="page-header">
        <button class="back-btn" onclick="spaNavigate('home')"><img src="images/icons/back.svg" alt="Voltar"></button>
        <h1 class="page-title">Projetos</h1>
    </div>
    <div class="controls-grid">
        <div class="control-card small">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Projeto 1</div>
        </div>
        <div class="control-card small">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Projeto 2</div>
        </div>
        <div class="control-card small">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Projeto 3</div>
        </div>
    </div>
</div>
        `,

        cinema: () => `
<div class="page active page-container" style="background-image: url('https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/cinema-photo.png');">
    <div class="page-header">
        <button class="back-btn" onclick="spaNavigate('home')"><img src="images/icons/back.svg" alt="Voltar"></button>
        <h1 class="page-title">Cinema</h1>
    </div>
    <div class="controls-grid">
        <div class="control-card large" data-state="off" onclick="toggleDevice(this, 'tv')">
            <img src="images/icons/icon-small-tv-off.svg" class="control-icon">
            <div class="control-label">TV</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card small" data-state="off" onclick="toggleDevice(this, 'light')">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Luz Ambiente</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card small" data-state="closed" onclick="toggleDevice(this, 'shader')">
            <img src="images/icons/icon-small-shader-off.svg" class="control-icon">
            <div class="control-label">Cortinas</div>
            <div class="control-state">Fechadas</div>
        </div>
    </div>
</div>
        `,

        recepcao: () => `
<div class="page active page-container" style="background-image: url('https://cdn.jsdelivr.net/gh/Ph1l-T/My-Dashboard-Hubitat@main/images/photos/recepcao-photo.png');">
    <div class="page-header">
        <button class="back-btn" onclick="spaNavigate('home')"><img src="images/icons/back.svg" alt="Voltar"></button>
        <h1 class="page-title">Recepção</h1>
    </div>
    <div class="controls-grid">
        <div class="control-card small" data-state="off" onclick="toggleDevice(this, 'light')">
            <img src="images/icons/icon-small-light-off.svg" class="control-icon">
            <div class="control-label">Luz</div>
            <div class="control-state">OFF</div>
        </div>
        <div class="control-card small" data-state="off" onclick="toggleDevice(this, 'tv')">
            <img src="images/icons/icon-small-tv-off.svg" class="control-icon">
            <div class="control-label">TV</div>
            <div class="control-state">OFF</div>
        </div>
    </div>
</div>
        `
    };

    function spaNavigate(page) {
        window.location.hash = page;
    }

    function renderSpa() {
        let page = window.location.hash.replace('#', '') || 'home';
        if (!pages[page]) page = 'home';
        spaRoot.innerHTML = pages[page]();

        // Atualiza navbar
        const nav = document.getElementById('spa-navbar');
        const items = nav.querySelectorAll('.nav-item');
        const navPages = Array.from(items).map(i => i.getAttribute('data-page'));

        // Mantém o Home ativo para Páginas que não estão na navbar (cômodos)
        const navPage = navPages.includes(page) ? page : 'home';
        let activeIndex = navPages.indexOf(navPage);
        if (activeIndex < 0) activeIndex = navPages.indexOf('home');

        items.forEach((item, idx) => {
            item.classList.toggle('active', idx === activeIndex);
        });

        // Move indicador (bolinha) dinamicamente
        const activeItem = items[activeIndex];
        if (activeItem) {
            const navRect = nav.getBoundingClientRect();
            const itemRect = activeItem.getBoundingClientRect();
            const center = itemRect.left + itemRect.width / 2 - navRect.left;
            nav.style.setProperty('--indicator-left', `${center}px`);
        }

        // Inicializa componentes específicos da Página
        if (page === 'escritorio') {
            setupThermostat();
        }
    }

    window.addEventListener('hashchange', renderSpa);
    window.addEventListener('DOMContentLoaded', () => {
        renderSpa();
        // Navbar SPA - garantir que listeners são aplicados após DOM pronto
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                const page = item.getAttribute('data-page');
                if (page) {
                    e.preventDefault();
                    spaNavigate(page);
                }
            });
        });
    });
    </script>
</body>
</html>


